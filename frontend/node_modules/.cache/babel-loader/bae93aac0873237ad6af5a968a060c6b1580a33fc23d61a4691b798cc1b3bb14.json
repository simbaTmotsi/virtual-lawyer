{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{PlusIcon,EyeIcon}from'@heroicons/react/24/outline';import apiRequest from'../../utils/api';// Import API utility\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CasesList=()=>{const[cases,setCases]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchCases=async()=>{try{setLoading(true);const response=await apiRequest('/api/cases/');// Adjust endpoint as needed\nsetCases(response||[]);// Assuming response is an array of cases\nsetError(null);}catch(err){setError(err.message||'Failed to fetch cases.');console.error('Failed to fetch cases:',err);setCases([]);// Ensure cases is an array in case of error\n}finally{setLoading(false);}};fetchCases();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-10\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-lg\",children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Could not load case data. Please try again later.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 dark:text-white\",children:\"Cases List\"}),/*#__PURE__*/_jsxs(Link,{to:\"/cases/new\",className:\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md shadow-sm hover:bg-primary-700 focus:outline-none\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Add New Case\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 shadow dark:shadow-gray-700/10 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Case Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Client\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Last Updated\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"relative px-6 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"View\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\",children:cases.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400\",children:\"No cases found.\"})}):cases.map(c=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\",children:c.title}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\",children:c.client_details?`${c.client_details.first_name} ${c.client_details.last_name}`:c.client||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\",children:c.case_type||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${c.status==='Active'||c.status==='active'?'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200':c.status==='Closed'||c.status==='closed'?'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300':'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'}`,children:c.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\",children:c.last_updated?new Date(c.last_updated).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(Link,{to:`/cases/${c.id}`,className:\"text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-200 flex items-center justify-end\",children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-5 w-5 mr-1\"}),\" View\"]})})]},c.id))})]})})})]});};export default CasesList;","map":{"version":3,"names":["React","useState","useEffect","Link","PlusIcon","EyeIcon","apiRequest","jsx","_jsx","jsxs","_jsxs","CasesList","cases","setCases","loading","setLoading","error","setError","fetchCases","response","err","message","console","className","children","to","scope","length","colSpan","map","c","title","client_details","first_name","last_name","client","case_type","status","last_updated","Date","toLocaleDateString","id"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/pages/cases/CasesList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { PlusIcon, EyeIcon } from '@heroicons/react/24/outline';\nimport apiRequest from '../../utils/api'; // Import API utility\n\nconst CasesList = () => {\n  const [cases, setCases] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchCases = async () => {\n      try {\n        setLoading(true);\n        const response = await apiRequest('/api/cases/'); // Adjust endpoint as needed\n        setCases(response || []); // Assuming response is an array of cases\n        setError(null);\n      } catch (err) {\n        setError(err.message || 'Failed to fetch cases.');\n        console.error('Failed to fetch cases:', err);\n        setCases([]); // Ensure cases is an array in case of error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCases();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-10\">\n        <p className=\"text-red-500 text-lg\">Error: {error}</p>\n        <p className=\"text-gray-600 dark:text-gray-400\">Could not load case data. Please try again later.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white\">Cases List</h2>\n        <Link\n          to=\"/cases/new\"\n          className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md shadow-sm hover:bg-primary-700 focus:outline-none\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add New Case\n        </Link>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 shadow dark:shadow-gray-700/10 rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Case Title</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Client</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Type</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Status</th>\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Last Updated</th>\n                <th scope=\"col\" className=\"relative px-6 py-3\">\n                  <span className=\"sr-only\">View</span>\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {cases.length === 0 ? (\n                <tr>\n                  <td colSpan=\"6\" className=\"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400\">\n                    No cases found.\n                  </td>\n                </tr>\n              ) : (\n                cases.map((c) => (\n                  <tr key={c.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\">{c.title}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\">\n                      {c.client_details ? `${c.client_details.first_name} ${c.client_details.last_name}` : (c.client || 'N/A')}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\">{c.case_type || 'N/A'}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                        c.status === 'Active' || c.status === 'active' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\n                        c.status === 'Closed' || c.status === 'closed' ? 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' :\n                        'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                      }`}>\n                        {c.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\">{c.last_updated ? new Date(c.last_updated).toLocaleDateString() : 'N/A'}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                      <Link to={`/cases/${c.id}`} className=\"text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-200 flex items-center justify-end\">\n                        <EyeIcon className=\"h-5 w-5 mr-1\" /> View\n                      </Link>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CasesList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}