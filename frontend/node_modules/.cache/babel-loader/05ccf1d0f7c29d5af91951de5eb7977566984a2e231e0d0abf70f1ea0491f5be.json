{"ast":null,"code":"/**\n * API utility functions for making HTTP requests\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {string} method - HTTP method (GET, POST, PUT, DELETE)\n * @param {Object} data - Request body for POST/PUT requests\n * @param {Object} options - Additional fetch options\n * @returns {Promise<Object>} Response data\n */\nexport const apiRequest = async (endpoint, method = 'GET', data = null, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  const fetchOptions = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    ...options\n  };\n\n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    fetchOptions.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Add request body for POST/PUT requests\n  if (data && (method === 'POST' || method === 'PUT')) {\n    fetchOptions.body = JSON.stringify(data);\n  }\n  try {\n    console.group(`API Request: ${method} ${endpoint}`);\n    console.log('Request options:', fetchOptions);\n    const response = await fetch(url, fetchOptions);\n    let responseData;\n\n    // Try to parse as JSON, fallback to text\n    const contentType = response.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      responseData = await response.json();\n    } else {\n      responseData = await response.text();\n    }\n    console.log('Response status:', response.status);\n    console.log('Response data:', responseData);\n    console.groupEnd();\n    if (!response.ok) {\n      throw {\n        status: response.status,\n        data: responseData\n      };\n    }\n    return responseData;\n  } catch (error) {\n    console.error('API request failed:', error);\n    console.groupEnd();\n    throw error;\n  }\n};\n\n/**\n * Authentication-related API requests\n */\nexport const authAPI = {\n  register: userData => apiRequest('/api/users/register', 'POST', userData),\n  login: credentials => apiRequest('/api/auth/login', 'POST', credentials),\n  logout: () => apiRequest('/api/auth/logout', 'POST'),\n  forgotPassword: email => apiRequest('/api/auth/password-reset', 'POST', {\n    email\n  }),\n  resetPassword: (token, password) => apiRequest('/api/auth/password-reset/confirm', 'POST', {\n    token,\n    password\n  }),\n  getCurrentUser: () => apiRequest('/api/users/me', 'GET')\n};\nexport default apiRequest;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiRequest","endpoint","method","data","options","url","fetchOptions","headers","token","localStorage","getItem","Authorization","body","JSON","stringify","console","group","log","response","fetch","responseData","contentType","get","includes","json","text","status","groupEnd","ok","error","authAPI","register","userData","login","credentials","logout","forgotPassword","email","resetPassword","password","getCurrentUser"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/utils/api.js"],"sourcesContent":["/**\n * API utility functions for making HTTP requests\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {string} method - HTTP method (GET, POST, PUT, DELETE)\n * @param {Object} data - Request body for POST/PUT requests\n * @param {Object} options - Additional fetch options\n * @returns {Promise<Object>} Response data\n */\nexport const apiRequest = async (endpoint, method = 'GET', data = null, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  \n  const fetchOptions = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n    ...options,\n  };\n  \n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    fetchOptions.headers.Authorization = `Bearer ${token}`;\n  }\n  \n  // Add request body for POST/PUT requests\n  if (data && (method === 'POST' || method === 'PUT')) {\n    fetchOptions.body = JSON.stringify(data);\n  }\n  \n  try {\n    console.group(`API Request: ${method} ${endpoint}`);\n    console.log('Request options:', fetchOptions);\n    \n    const response = await fetch(url, fetchOptions);\n    let responseData;\n    \n    // Try to parse as JSON, fallback to text\n    const contentType = response.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      responseData = await response.json();\n    } else {\n      responseData = await response.text();\n    }\n    \n    console.log('Response status:', response.status);\n    console.log('Response data:', responseData);\n    console.groupEnd();\n    \n    if (!response.ok) {\n      throw { status: response.status, data: responseData };\n    }\n    \n    return responseData;\n  } catch (error) {\n    console.error('API request failed:', error);\n    console.groupEnd();\n    throw error;\n  }\n};\n\n/**\n * Authentication-related API requests\n */\nexport const authAPI = {\n  register: (userData) => apiRequest('/api/users/register', 'POST', userData),\n  login: (credentials) => apiRequest('/api/auth/login', 'POST', credentials),\n  logout: () => apiRequest('/api/auth/logout', 'POST'),\n  forgotPassword: (email) => apiRequest('/api/auth/password-reset', 'POST', { email }),\n  resetPassword: (token, password) => apiRequest('/api/auth/password-reset/confirm', 'POST', { token, password }),\n  getCurrentUser: () => apiRequest('/api/users/me', 'GET'),\n};\n\nexport default apiRequest;\n"],"mappings":"AAAA;AACA;AACA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,EAAE;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACvF,MAAMC,GAAG,GAAG,GAAGT,YAAY,GAAGK,QAAQ,EAAE;EAExC,MAAMK,YAAY,GAAG;IACnBJ,MAAM;IACNK,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGH,OAAO,CAACG;IACb,CAAC;IACD,GAAGH;EACL,CAAC;;EAED;EACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTF,YAAY,CAACC,OAAO,CAACI,aAAa,GAAG,UAAUH,KAAK,EAAE;EACxD;;EAEA;EACA,IAAIL,IAAI,KAAKD,MAAM,KAAK,MAAM,IAAIA,MAAM,KAAK,KAAK,CAAC,EAAE;IACnDI,YAAY,CAACM,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACX,IAAI,CAAC;EAC1C;EAEA,IAAI;IACFY,OAAO,CAACC,KAAK,CAAC,gBAAgBd,MAAM,IAAID,QAAQ,EAAE,CAAC;IACnDc,OAAO,CAACE,GAAG,CAAC,kBAAkB,EAAEX,YAAY,CAAC;IAE7C,MAAMY,QAAQ,GAAG,MAAMC,KAAK,CAACd,GAAG,EAAEC,YAAY,CAAC;IAC/C,IAAIc,YAAY;;IAEhB;IACA,MAAMC,WAAW,GAAGH,QAAQ,CAACX,OAAO,CAACe,GAAG,CAAC,cAAc,CAAC;IACxD,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MAC3DH,YAAY,GAAG,MAAMF,QAAQ,CAACM,IAAI,CAAC,CAAC;IACtC,CAAC,MAAM;MACLJ,YAAY,GAAG,MAAMF,QAAQ,CAACO,IAAI,CAAC,CAAC;IACtC;IAEAV,OAAO,CAACE,GAAG,CAAC,kBAAkB,EAAEC,QAAQ,CAACQ,MAAM,CAAC;IAChDX,OAAO,CAACE,GAAG,CAAC,gBAAgB,EAAEG,YAAY,CAAC;IAC3CL,OAAO,CAACY,QAAQ,CAAC,CAAC;IAElB,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;MAChB,MAAM;QAAEF,MAAM,EAAER,QAAQ,CAACQ,MAAM;QAAEvB,IAAI,EAAEiB;MAAa,CAAC;IACvD;IAEA,OAAOA,YAAY;EACrB,CAAC,CAAC,OAAOS,KAAK,EAAE;IACdd,OAAO,CAACc,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC3Cd,OAAO,CAACY,QAAQ,CAAC,CAAC;IAClB,MAAME,KAAK;EACb;AACF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,OAAO,GAAG;EACrBC,QAAQ,EAAGC,QAAQ,IAAKhC,UAAU,CAAC,qBAAqB,EAAE,MAAM,EAAEgC,QAAQ,CAAC;EAC3EC,KAAK,EAAGC,WAAW,IAAKlC,UAAU,CAAC,iBAAiB,EAAE,MAAM,EAAEkC,WAAW,CAAC;EAC1EC,MAAM,EAAEA,CAAA,KAAMnC,UAAU,CAAC,kBAAkB,EAAE,MAAM,CAAC;EACpDoC,cAAc,EAAGC,KAAK,IAAKrC,UAAU,CAAC,0BAA0B,EAAE,MAAM,EAAE;IAAEqC;EAAM,CAAC,CAAC;EACpFC,aAAa,EAAEA,CAAC9B,KAAK,EAAE+B,QAAQ,KAAKvC,UAAU,CAAC,kCAAkC,EAAE,MAAM,EAAE;IAAEQ,KAAK;IAAE+B;EAAS,CAAC,CAAC;EAC/GC,cAAc,EAAEA,CAAA,KAAMxC,UAAU,CAAC,eAAe,EAAE,KAAK;AACzD,CAAC;AAED,eAAeA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}