{"ast":null,"code":"import React,{useState,useEffect}from'react';import apiRequest from'../../utils/api';import{ClockIcon,MagnifyingGlassIcon,ArrowPathIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResearchHistory=()=>{const[history,setHistory]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchResearchHistory=async()=>{try{setLoading(true);const response=await apiRequest('/api/research/history/');setHistory(response||[]);setError(null);}catch(err){console.error('Failed to fetch research history:',err);setError('Failed to load research history. Please try again.');}finally{setLoading(false);}};fetchResearchHistory();},[]);const formatDate=dateString=>{const date=new Date(dateString);return new Intl.DateTimeFormat('en-US',{year:'numeric',month:'short',day:'numeric',hour:'numeric',minute:'numeric'}).format(date);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"animate-spin h-8 w-8 text-primary-500\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 dark:bg-red-900/30 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800 dark:text-red-200\",children:\"Error\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-red-700 dark:text-red-300\",children:/*#__PURE__*/_jsx(\"p\",{children:error})})]})})});}if(history.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900 dark:text-white\",children:\"No research history\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:\"Your research history will appear here after you perform searches or analyze documents.\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"research-history\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden bg-white dark:bg-gray-800 shadow sm:rounded-md\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:history.map(item=>/*#__PURE__*/_jsxs(\"li\",{className:\"px-4 py-4 sm:px-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[item.type==='search'?/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"flex-shrink-0 h-5 w-5 text-gray-400 mr-3\"}):/*#__PURE__*/_jsx(ClockIcon,{className:\"flex-shrink-0 h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-primary-600 dark:text-primary-400 truncate\",children:[item.type==='search'?'Search: ':'Document Analysis: ',item.query_text||item.document_name]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-2 flex-shrink-0 flex\",children:/*#__PURE__*/_jsx(\"p\",{className:\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\",children:formatDate(item.timestamp)})})]}),item.jurisdiction&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 sm:flex sm:justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center text-sm text-gray-500 dark:text-gray-400\",children:[\"Jurisdiction: \",item.jurisdiction]})})}),item.type==='search'&&item.results_count&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 sm:flex sm:justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center text-sm text-gray-500 dark:text-gray-400\",children:[\"Results: \",item.results_count]})})})]},item.id))})})});};export default ResearchHistory;","map":{"version":3,"names":["React","useState","useEffect","apiRequest","ClockIcon","MagnifyingGlassIcon","ArrowPathIcon","jsx","_jsx","jsxs","_jsxs","ResearchHistory","history","setHistory","loading","setLoading","error","setError","fetchResearchHistory","response","err","console","formatDate","dateString","date","Date","Intl","DateTimeFormat","year","month","day","hour","minute","format","className","children","length","map","item","type","query_text","document_name","timestamp","jurisdiction","results_count","id"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/pages/research/ResearchHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport apiRequest from '../../utils/api';\nimport { ClockIcon, MagnifyingGlassIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\nconst ResearchHistory = () => {\n  const [history, setHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchResearchHistory = async () => {\n      try {\n        setLoading(true);\n        const response = await apiRequest('/api/research/history/');\n        setHistory(response || []);\n        setError(null);\n      } catch (err) {\n        console.error('Failed to fetch research history:', err);\n        setError('Failed to load research history. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchResearchHistory();\n  }, []);\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric'\n    }).format(date);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <ArrowPathIcon className=\"animate-spin h-8 w-8 text-primary-500\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"rounded-md bg-red-50 dark:bg-red-900/30 p-4\">\n        <div className=\"flex\">\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-200\">Error</h3>\n            <div className=\"mt-2 text-sm text-red-700 dark:text-red-300\">\n              <p>{error}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (history.length === 0) {\n    return (\n      <div className=\"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow\">\n        <ClockIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">No research history</h3>\n        <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n          Your research history will appear here after you perform searches or analyze documents.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"research-history\">\n      <div className=\"overflow-hidden bg-white dark:bg-gray-800 shadow sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n          {history.map((item) => (\n            <li key={item.id} className=\"px-4 py-4 sm:px-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  {item.type === 'search' ? (\n                    <MagnifyingGlassIcon className=\"flex-shrink-0 h-5 w-5 text-gray-400 mr-3\" />\n                  ) : (\n                    <ClockIcon className=\"flex-shrink-0 h-5 w-5 text-gray-400 mr-3\" />\n                  )}\n                  <p className=\"text-sm font-medium text-primary-600 dark:text-primary-400 truncate\">\n                    {item.type === 'search' ? 'Search: ' : 'Document Analysis: '}\n                    {item.query_text || item.document_name}\n                  </p>\n                </div>\n                <div className=\"ml-2 flex-shrink-0 flex\">\n                  <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\">\n                    {formatDate(item.timestamp)}\n                  </p>\n                </div>\n              </div>\n              {item.jurisdiction && (\n                <div className=\"mt-2 sm:flex sm:justify-between\">\n                  <div className=\"sm:flex\">\n                    <p className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                      Jurisdiction: {item.jurisdiction}\n                    </p>\n                  </div>\n                </div>\n              )}\n              {item.type === 'search' && item.results_count && (\n                <div className=\"mt-2 sm:flex sm:justify-between\">\n                  <div className=\"sm:flex\">\n                    <p className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                      Results: {item.results_count}\n                    </p>\n                  </div>\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default ResearchHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}