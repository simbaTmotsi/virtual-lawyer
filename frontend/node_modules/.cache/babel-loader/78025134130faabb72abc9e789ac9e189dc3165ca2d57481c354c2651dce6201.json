{"ast":null,"code":"/**\n * API request utility for making authenticated requests\n */\n\n// Base API request function\nexport const apiRequest = async (endpoint, options = {}) => {\n  const baseUrl = process.env.REACT_APP_API_URL || '';\n  const url = `${baseUrl}${endpoint}`;\n  const defaultHeaders = {\n    'Content-Type': 'application/json'\n  };\n\n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    defaultHeaders.Authorization = `Bearer ${token}`;\n  }\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers\n    }\n  };\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || 'API request failed');\n    }\n    return data;\n  } catch (error) {\n    console.error('API request error:', error);\n    throw error;\n  }\n};\n\n// API utilities for common HTTP methods\nexport const api = {\n  get: (endpoint, options = {}) => apiRequest(endpoint, {\n    method: 'GET',\n    ...options\n  }),\n  post: (endpoint, data, options = {}) => apiRequest(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    ...options\n  }),\n  put: (endpoint, data, options = {}) => apiRequest(endpoint, {\n    method: 'PUT',\n    body: JSON.stringify(data),\n    ...options\n  }),\n  delete: (endpoint, options = {}) => apiRequest(endpoint, {\n    method: 'DELETE',\n    ...options\n  })\n};\n\n// Auth-specific API methods\nexport const AuthAPI = {\n  login: credentials => api.post('/accounts/login/', credentials),\n  // Updated URL\n  register: userData => api.post('/accounts/register/', userData),\n  // Updated URL\n  refreshToken: refreshToken => api.post('/accounts/refresh/', {\n    refresh_token: refreshToken\n  }),\n  // Updated URL\n  getCurrentUser: () => api.get('/accounts/users/me/')\n};\n\n// Export the API object as default\nexport default api;","map":{"version":3,"names":["apiRequest","endpoint","options","baseUrl","process","env","REACT_APP_API_URL","url","defaultHeaders","token","localStorage","getItem","Authorization","config","headers","response","fetch","data","json","ok","Error","message","error","console","api","get","method","post","body","JSON","stringify","put","delete","AuthAPI","login","credentials","register","userData","refreshToken","refresh_token","getCurrentUser"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/utils/api.js"],"sourcesContent":["/**\n * API request utility for making authenticated requests\n */\n\n// Base API request function\nexport const apiRequest = async (endpoint, options = {}) => {\n  const baseUrl = process.env.REACT_APP_API_URL || '';\n  const url = `${baseUrl}${endpoint}`;\n  \n  const defaultHeaders = {\n    'Content-Type': 'application/json',\n  };\n\n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    defaultHeaders.Authorization = `Bearer ${token}`;\n  }\n\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers,\n    },\n  };\n\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n    \n    if (!response.ok) {\n      throw new Error(data.message || 'API request failed');\n    }\n    \n    return data;\n  } catch (error) {\n    console.error('API request error:', error);\n    throw error;\n  }\n};\n\n// API utilities for common HTTP methods\nexport const api = {\n  get: (endpoint, options = {}) => apiRequest(endpoint, { method: 'GET', ...options }),\n  post: (endpoint, data, options = {}) => apiRequest(endpoint, { \n    method: 'POST', \n    body: JSON.stringify(data),\n    ...options \n  }),\n  put: (endpoint, data, options = {}) => apiRequest(endpoint, { \n    method: 'PUT', \n    body: JSON.stringify(data),\n    ...options \n  }),\n  delete: (endpoint, options = {}) => apiRequest(endpoint, { method: 'DELETE', ...options }),\n};\n\n// Auth-specific API methods\nexport const AuthAPI = {\n  login: (credentials) => api.post('/accounts/login/', credentials),  // Updated URL\n  register: (userData) => api.post('/accounts/register/', userData),  // Updated URL\n  refreshToken: (refreshToken) => api.post('/accounts/refresh/', { refresh_token: refreshToken }),  // Updated URL\n  getCurrentUser: () => api.get('/accounts/users/me/'),\n};\n\n// Export the API object as default\nexport default api;\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA,OAAO,MAAMA,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAC1D,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,EAAE;EACnD,MAAMC,GAAG,GAAG,GAAGJ,OAAO,GAAGF,QAAQ,EAAE;EAEnC,MAAMO,cAAc,GAAG;IACrB,cAAc,EAAE;EAClB,CAAC;;EAED;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,cAAc,CAACI,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EAEA,MAAMI,MAAM,GAAG;IACb,GAAGX,OAAO;IACVY,OAAO,EAAE;MACP,GAAGN,cAAc;MACjB,GAAGN,OAAO,CAACY;IACb;EACF,CAAC;EAED,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACT,GAAG,EAAEM,MAAM,CAAC;IACzC,MAAMI,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,IAAI,oBAAoB,CAAC;IACvD;IAEA,OAAOJ,IAAI;EACb,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC1C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAME,GAAG,GAAG;EACjBC,GAAG,EAAEA,CAACxB,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAKF,UAAU,CAACC,QAAQ,EAAE;IAAEyB,MAAM,EAAE,KAAK;IAAE,GAAGxB;EAAQ,CAAC,CAAC;EACpFyB,IAAI,EAAEA,CAAC1B,QAAQ,EAAEgB,IAAI,EAAEf,OAAO,GAAG,CAAC,CAAC,KAAKF,UAAU,CAACC,QAAQ,EAAE;IAC3DyB,MAAM,EAAE,MAAM;IACdE,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC;IAC1B,GAAGf;EACL,CAAC,CAAC;EACF6B,GAAG,EAAEA,CAAC9B,QAAQ,EAAEgB,IAAI,EAAEf,OAAO,GAAG,CAAC,CAAC,KAAKF,UAAU,CAACC,QAAQ,EAAE;IAC1DyB,MAAM,EAAE,KAAK;IACbE,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC;IAC1B,GAAGf;EACL,CAAC,CAAC;EACF8B,MAAM,EAAEA,CAAC/B,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAKF,UAAU,CAACC,QAAQ,EAAE;IAAEyB,MAAM,EAAE,QAAQ;IAAE,GAAGxB;EAAQ,CAAC;AAC3F,CAAC;;AAED;AACA,OAAO,MAAM+B,OAAO,GAAG;EACrBC,KAAK,EAAGC,WAAW,IAAKX,GAAG,CAACG,IAAI,CAAC,kBAAkB,EAAEQ,WAAW,CAAC;EAAG;EACpEC,QAAQ,EAAGC,QAAQ,IAAKb,GAAG,CAACG,IAAI,CAAC,qBAAqB,EAAEU,QAAQ,CAAC;EAAG;EACpEC,YAAY,EAAGA,YAAY,IAAKd,GAAG,CAACG,IAAI,CAAC,oBAAoB,EAAE;IAAEY,aAAa,EAAED;EAAa,CAAC,CAAC;EAAG;EAClGE,cAAc,EAAEA,CAAA,KAAMhB,GAAG,CAACC,GAAG,CAAC,qBAAqB;AACrD,CAAC;;AAED;AACA,eAAeD,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}