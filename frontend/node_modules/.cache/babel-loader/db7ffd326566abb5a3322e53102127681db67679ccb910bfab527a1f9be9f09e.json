{"ast":null,"code":"import React,{Fragment}from'react';import{Menu,Transition}from'@headlessui/react';import{BellIcon,CheckIcon}from'@heroicons/react/24/outline';import{useNotifications}from'../../contexts/NotificationsContext';import{formatDistanceToNow}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationsMenu=()=>{const{notifications,unreadCount,markAsRead,markAllAsRead,loading,fetchNotifications}=useNotifications();const handleNotificationClick=async notification=>{if(!notification.read){await markAsRead(notification.id);}// Navigate to the related content if needed\n// history.push(notification.link);\n};return/*#__PURE__*/_jsxs(Menu,{as:\"div\",className:\"relative ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Menu.Button,{className:\"rounded-full bg-white dark:bg-gray-700 p-1 text-gray-500 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"View notifications\"}),/*#__PURE__*/_jsx(BellIcon,{className:\"h-6 w-6\",\"aria-hidden\":\"true\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-0 right-0 block h-4 w-4 rounded-full bg-red-500 text-xs text-white flex items-center justify-center transform translate-x-1/4 -translate-y-1/4\",children:unreadCount>9?'9+':unreadCount})]})}),/*#__PURE__*/_jsx(Transition,{as:Fragment,enter:\"transition ease-out duration-100\",enterFrom:\"transform opacity-0 scale-95\",enterTo:\"transform opacity-100 scale-100\",leave:\"transition ease-in duration-75\",leaveFrom:\"transform opacity-100 scale-100\",leaveTo:\"transform opacity-0 scale-95\",children:/*#__PURE__*/_jsxs(Menu.Items,{className:\"absolute right-0 z-10 mt-2 w-80 origin-top-right rounded-md bg-white dark:bg-gray-800 py-1 shadow-lg ring-1 ring-black dark:ring-gray-700 ring-opacity-5 focus:outline-none\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:fetchNotifications,className:\"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:markAllAsRead,className:\"text-xs text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300\",children:\"Mark all as read\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-80 overflow-y-auto\",children:loading&&notifications.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400\",children:\"Loading notifications...\"}):notifications.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400\",children:\"No notifications yet\"}):/*#__PURE__*/_jsx(\"div\",{children:notifications.map(notification=>/*#__PURE__*/_jsx(Menu.Item,{children:_ref=>{let{active}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:`\n                          ${active?'bg-gray-100 dark:bg-gray-700':''}\n                          ${!notification.read?'bg-blue-50 dark:bg-blue-900/20':''}\n                          px-4 py-3 border-b border-gray-100 dark:border-gray-700 cursor-pointer\n                        `,onClick:()=>handleNotificationClick(notification),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:`text-sm ${!notification.read?'font-medium text-gray-900 dark:text-white':'text-gray-700 dark:text-gray-300'}`,children:notification.title}),!notification.read&&/*#__PURE__*/_jsx(\"span\",{className:\"h-2 w-2 bg-blue-600 dark:bg-blue-400 rounded-full\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:notification.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 dark:text-gray-500 mt-1\",children:notification.created_at?formatDistanceToNow(new Date(notification.created_at),{addSuffix:true}):''})]});}},notification.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/notifications\",className:\"text-xs text-center block text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300\",children:\"View all notifications\"})})]})})]});};export default NotificationsMenu;","map":{"version":3,"names":["React","Fragment","Menu","Transition","BellIcon","CheckIcon","useNotifications","formatDistanceToNow","jsx","_jsx","jsxs","_jsxs","NotificationsMenu","notifications","unreadCount","markAsRead","markAllAsRead","loading","fetchNotifications","handleNotificationClick","notification","read","id","as","className","children","Button","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","onClick","length","map","Item","_ref","active","title","message","created_at","Date","addSuffix","href"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/components/navigation/NotificationsMenu.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { Menu, Transition } from '@headlessui/react';\nimport { BellIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { useNotifications } from '../../contexts/NotificationsContext';\nimport { formatDistanceToNow } from 'date-fns';\n\nconst NotificationsMenu = () => {\n  const { \n    notifications, \n    unreadCount, \n    markAsRead, \n    markAllAsRead, \n    loading,\n    fetchNotifications\n  } = useNotifications();\n\n  const handleNotificationClick = async (notification) => {\n    if (!notification.read) {\n      await markAsRead(notification.id);\n    }\n    // Navigate to the related content if needed\n    // history.push(notification.link);\n  };\n\n  return (\n    <Menu as=\"div\" className=\"relative ml-3\">\n      <div>\n        <Menu.Button className=\"rounded-full bg-white dark:bg-gray-700 p-1 text-gray-500 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 relative\">\n          <span className=\"sr-only\">View notifications</span>\n          <BellIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n          {unreadCount > 0 && (\n            <span className=\"absolute top-0 right-0 block h-4 w-4 rounded-full bg-red-500 text-xs text-white flex items-center justify-center transform translate-x-1/4 -translate-y-1/4\">\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </span>\n          )}\n        </Menu.Button>\n      </div>\n      <Transition\n        as={Fragment}\n        enter=\"transition ease-out duration-100\"\n        enterFrom=\"transform opacity-0 scale-95\"\n        enterTo=\"transform opacity-100 scale-100\"\n        leave=\"transition ease-in duration-75\"\n        leaveFrom=\"transform opacity-100 scale-100\"\n        leaveTo=\"transform opacity-0 scale-95\"\n      >\n        <Menu.Items className=\"absolute right-0 z-10 mt-2 w-80 origin-top-right rounded-md bg-white dark:bg-gray-800 py-1 shadow-lg ring-1 ring-black dark:ring-gray-700 ring-opacity-5 focus:outline-none\">\n          <div className=\"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">Notifications</h3>\n            <div className=\"flex gap-2\">\n              <button \n                onClick={fetchNotifications}\n                className=\"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white\"\n              >\n                Refresh\n              </button>\n              <button \n                onClick={markAllAsRead}\n                className=\"text-xs text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300\"\n              >\n                Mark all as read\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"max-h-80 overflow-y-auto\">\n            {loading && notifications.length === 0 ? (\n              <div className=\"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400\">\n                Loading notifications...\n              </div>\n            ) : notifications.length === 0 ? (\n              <div className=\"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400\">\n                No notifications yet\n              </div>\n            ) : (\n              <div>\n                {notifications.map((notification) => (\n                  <Menu.Item key={notification.id}>\n                    {({ active }) => (\n                      <div\n                        className={`\n                          ${active ? 'bg-gray-100 dark:bg-gray-700' : ''}\n                          ${!notification.read ? 'bg-blue-50 dark:bg-blue-900/20' : ''}\n                          px-4 py-3 border-b border-gray-100 dark:border-gray-700 cursor-pointer\n                        `}\n                        onClick={() => handleNotificationClick(notification)}\n                      >\n                        <div className=\"flex justify-between\">\n                          <p \n                            className={`text-sm ${!notification.read ? 'font-medium text-gray-900 dark:text-white' : 'text-gray-700 dark:text-gray-300'}`}\n                          >\n                            {notification.title}\n                          </p>\n                          {!notification.read && (\n                            <span className=\"h-2 w-2 bg-blue-600 dark:bg-blue-400 rounded-full\"></span>\n                          )}\n                        </div>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {notification.message}\n                        </p>\n                        <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                          {notification.created_at ? formatDistanceToNow(new Date(notification.created_at), { addSuffix: true }) : ''}\n                        </p>\n                      </div>\n                    )}\n                  </Menu.Item>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          <div className=\"px-4 py-2 border-t border-gray-200 dark:border-gray-700\">\n            <a \n              href=\"/notifications\" \n              className=\"text-xs text-center block text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300\"\n            >\n              View all notifications\n            </a>\n          </div>\n        </Menu.Items>\n      </Transition>\n    </Menu>\n  );\n};\n\nexport default NotificationsMenu;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,CAAEC,UAAU,KAAQ,mBAAmB,CACpD,OAASC,QAAQ,CAAEC,SAAS,KAAQ,6BAA6B,CACjE,OAASC,gBAAgB,KAAQ,qCAAqC,CACtE,OAASC,mBAAmB,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CACJC,aAAa,CACbC,WAAW,CACXC,UAAU,CACVC,aAAa,CACbC,OAAO,CACPC,kBACF,CAAC,CAAGZ,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAAa,uBAAuB,CAAG,KAAO,CAAAC,YAAY,EAAK,CACtD,GAAI,CAACA,YAAY,CAACC,IAAI,CAAE,CACtB,KAAM,CAAAN,UAAU,CAACK,YAAY,CAACE,EAAE,CAAC,CACnC,CACA;AACA;AACF,CAAC,CAED,mBACEX,KAAA,CAACT,IAAI,EAACqB,EAAE,CAAC,KAAK,CAACC,SAAS,CAAC,eAAe,CAAAC,QAAA,eACtChB,IAAA,QAAAgB,QAAA,cACEd,KAAA,CAACT,IAAI,CAACwB,MAAM,EAACF,SAAS,CAAC,2MAA2M,CAAAC,QAAA,eAChOhB,IAAA,SAAMe,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,oBAAkB,CAAM,CAAC,cACnDhB,IAAA,CAACL,QAAQ,EAACoB,SAAS,CAAC,SAAS,CAAC,cAAY,MAAM,CAAE,CAAC,CAClDV,WAAW,CAAG,CAAC,eACdL,IAAA,SAAMe,SAAS,CAAC,6JAA6J,CAAAC,QAAA,CAC1KX,WAAW,CAAG,CAAC,CAAG,IAAI,CAAGA,WAAW,CACjC,CACP,EACU,CAAC,CACX,CAAC,cACNL,IAAA,CAACN,UAAU,EACToB,EAAE,CAAEtB,QAAS,CACb0B,KAAK,CAAC,kCAAkC,CACxCC,SAAS,CAAC,8BAA8B,CACxCC,OAAO,CAAC,iCAAiC,CACzCC,KAAK,CAAC,gCAAgC,CACtCC,SAAS,CAAC,iCAAiC,CAC3CC,OAAO,CAAC,8BAA8B,CAAAP,QAAA,cAEtCd,KAAA,CAACT,IAAI,CAAC+B,KAAK,EAACT,SAAS,CAAC,6KAA6K,CAAAC,QAAA,eACjMd,KAAA,QAAKa,SAAS,CAAC,2FAA2F,CAAAC,QAAA,eACxGhB,IAAA,OAAIe,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACpFd,KAAA,QAAKa,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhB,IAAA,WACEyB,OAAO,CAAEhB,kBAAmB,CAC5BM,SAAS,CAAC,oFAAoF,CAAAC,QAAA,CAC/F,SAED,CAAQ,CAAC,cACThB,IAAA,WACEyB,OAAO,CAAElB,aAAc,CACvBQ,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAC9G,kBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENhB,IAAA,QAAKe,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CACtCR,OAAO,EAAIJ,aAAa,CAACsB,MAAM,GAAK,CAAC,cACpC1B,IAAA,QAAKe,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,0BAEhF,CAAK,CAAC,CACJZ,aAAa,CAACsB,MAAM,GAAK,CAAC,cAC5B1B,IAAA,QAAKe,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,sBAEhF,CAAK,CAAC,cAENhB,IAAA,QAAAgB,QAAA,CACGZ,aAAa,CAACuB,GAAG,CAAEhB,YAAY,eAC9BX,IAAA,CAACP,IAAI,CAACmC,IAAI,EAAAZ,QAAA,CACPa,IAAA,MAAC,CAAEC,MAAO,CAAC,CAAAD,IAAA,oBACV3B,KAAA,QACEa,SAAS,CAAE;AACnC,4BAA4Be,MAAM,CAAG,8BAA8B,CAAG,EAAE;AACxE,4BAA4B,CAACnB,YAAY,CAACC,IAAI,CAAG,gCAAgC,CAAG,EAAE;AACtF;AACA,yBAA0B,CACFa,OAAO,CAAEA,CAAA,GAAMf,uBAAuB,CAACC,YAAY,CAAE,CAAAK,QAAA,eAErDd,KAAA,QAAKa,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnChB,IAAA,MACEe,SAAS,CAAE,WAAW,CAACJ,YAAY,CAACC,IAAI,CAAG,2CAA2C,CAAG,kCAAkC,EAAG,CAAAI,QAAA,CAE7HL,YAAY,CAACoB,KAAK,CAClB,CAAC,CACH,CAACpB,YAAY,CAACC,IAAI,eACjBZ,IAAA,SAAMe,SAAS,CAAC,mDAAmD,CAAO,CAC3E,EACE,CAAC,cACNf,IAAA,MAAGe,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CACzDL,YAAY,CAACqB,OAAO,CACpB,CAAC,cACJhC,IAAA,MAAGe,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CACzDL,YAAY,CAACsB,UAAU,CAAGnC,mBAAmB,CAAC,GAAI,CAAAoC,IAAI,CAACvB,YAAY,CAACsB,UAAU,CAAC,CAAE,CAAEE,SAAS,CAAE,IAAK,CAAC,CAAC,CAAG,EAAE,CAC1G,CAAC,EACD,CAAC,EACP,EA3BaxB,YAAY,CAACE,EA4BlB,CACZ,CAAC,CACC,CACN,CACE,CAAC,cAENb,IAAA,QAAKe,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cACtEhB,IAAA,MACEoC,IAAI,CAAC,gBAAgB,CACrBrB,SAAS,CAAC,qHAAqH,CAAAC,QAAA,CAChI,wBAED,CAAG,CAAC,CACD,CAAC,EACI,CAAC,CACH,CAAC,EACT,CAAC,CAEX,CAAC,CAED,cAAe,CAAAb,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}