{"ast":null,"code":"var _jsxFileName = \"/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/pages/research/LegalResearchTab.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DocumentPlusIcon, ChatBubbleLeftRightIcon, ArrowPathIcon, MagnifyingGlassIcon, BookOpenIcon, ScaleIcon, ArchiveBoxXMarkIcon } from '@heroicons/react/24/outline';\nimport apiRequest from '../../utils/api';\nimport DocumentUploader from '../../components/research/DocumentUploader';\nimport ChatInterface from '../../components/research/ChatInterface';\nimport DocumentManagement from '../../components/research/DocumentManagement';\nimport ZimLIISearchPanel from '../../components/research/ZimLIISearchPanel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LegalResearchTab = () => {\n  _s();\n  // State management\n  const [documents, setDocuments] = useState([]);\n  const [activeDocuments, setActiveDocuments] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showUploader, setShowUploader] = useState(false);\n  const [zimLIIResults, setZimLIIResults] = useState(null);\n  const [activeTab, setActiveTab] = useState('chat'); // 'chat', 'documents', 'zimlii'\n\n  // Fetch documents on component mount\n  useEffect(() => {\n    fetchDocuments();\n\n    // Add welcome message\n    setMessages([{\n      id: 'welcome',\n      type: 'system',\n      content: 'Welcome to the Legal Research Assistant. You can upload documents, ask legal questions, and search for Zimbabwe legal information. How can I help you today?',\n      timestamp: new Date()\n    }]);\n  }, []);\n  const fetchDocuments = async () => {\n    try {\n      setLoading(true);\n      const response = await apiRequest('/api/documents/');\n      setDocuments(response || []);\n    } catch (err) {\n      console.error('Failed to fetch documents:', err);\n      setError('Failed to load documents. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFileUpload = async files => {\n    try {\n      setLoading(true);\n\n      // Create a FormData object\n      const formData = new FormData();\n\n      // Add files to FormData\n      Array.from(files).forEach((file, index) => {\n        formData.append(`file_${index}`, file);\n      });\n\n      // Upload the files\n      const response = await apiRequest('/api/documents/upload/', 'POST', formData, true);\n\n      // Update documents list with new uploads\n      setDocuments(prev => [...prev, ...response]);\n\n      // Add system message about uploads\n      const uploadMessage = {\n        id: `upload-${Date.now()}`,\n        type: 'system',\n        content: `Uploaded ${files.length} document(s). You can now reference them in your research.`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, uploadMessage]);\n      setShowUploader(false);\n    } catch (err) {\n      console.error('Failed to upload documents:', err);\n      setError('Failed to upload documents. Please try again.');\n\n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to upload documents. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const toggleActiveDocument = docId => {\n    setActiveDocuments(prev => {\n      if (prev.includes(docId)) {\n        return prev.filter(id => id !== docId);\n      } else {\n        return [...prev, docId];\n      }\n    });\n  };\n  const getActiveDocumentContext = () => {\n    const activeDocsDetails = documents.filter(doc => activeDocuments.includes(doc.id));\n    return activeDocsDetails.map(doc => ({\n      id: doc.id,\n      name: doc.name,\n      content: doc.content || `Reference to document: ${doc.name}`\n    }));\n  };\n  const handleSendMessage = async message => {\n    if (!message.trim()) return;\n\n    // Check for ZimLII command\n    if (message.startsWith('/search_zimlii')) {\n      handleZimLIISearch(message.replace('/search_zimlii', '').trim());\n      return;\n    }\n\n    // Add user message to chat\n    const userMessage = {\n      id: `user-${Date.now()}`,\n      type: 'user',\n      content: message,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    try {\n      setLoading(true);\n\n      // Get active document context\n      const documentContext = getActiveDocumentContext();\n\n      // Get recent chat history (last 10 messages)\n      const recentChat = messages.slice(-10);\n\n      // Call Gemini API through our backend\n      const response = await apiRequest('/api/gemini/query-gemini/', 'POST', {\n        query: message,\n        documentContext: documentContext,\n        chatHistory: recentChat\n      });\n\n      // Check if Gemini suggests looking up ZimLII data\n      if (response.needsZimLII) {\n        // If the API extracted a search query for ZimLII\n        if (response.zimLIIQuery) {\n          handleZimLIISearch(response.zimLIIQuery);\n        }\n      }\n\n      // Add AI response to chat\n      const aiMessage = {\n        id: `ai-${Date.now()}`,\n        type: 'ai',\n        content: response.response,\n        timestamp: new Date(),\n        references: response.references || []\n      };\n      setMessages(prev => [...prev, aiMessage]);\n    } catch (err) {\n      console.error('Failed to get AI response:', err);\n\n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to get AI response. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleZimLIISearch = async searchQuery => {\n    if (!searchQuery.trim()) return;\n\n    // Add user message about ZimLII search\n    const userMessage = {\n      id: `zimlii-query-${Date.now()}`,\n      type: 'user',\n      content: `/search_zimlii ${searchQuery}`,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    try {\n      setLoading(true);\n\n      // System message about searching ZimLII\n      const searchingMessage = {\n        id: `zimlii-searching-${Date.now()}`,\n        type: 'system',\n        content: `Searching ZimLII for: \"${searchQuery}\"...`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, searchingMessage]);\n\n      // Query ZimLII API through our backend\n      const response = await apiRequest('/api/research/search-zimlii/', 'POST', {\n        query: searchQuery\n      });\n\n      // Store results in state\n      setZimLIIResults(response);\n\n      // Add results message\n      const resultsMessage = {\n        id: `zimlii-results-${Date.now()}`,\n        type: 'zimlii',\n        content: `Found ${response.count || 0} results on ZimLII for \"${searchQuery}\"`,\n        timestamp: new Date(),\n        results: response\n      };\n      setMessages(prev => [...prev, resultsMessage]);\n\n      // Switch to ZimLII results tab if there are results\n      if (response.count > 0) {\n        setActiveTab('zimlii');\n      }\n    } catch (err) {\n      console.error('Failed to search ZimLII:', err);\n\n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to search ZimLII. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteDocument = async docId => {\n    try {\n      setLoading(true);\n\n      // Make API request to delete the document\n      await apiRequest(`/api/documents/${docId}/`, 'DELETE');\n\n      // Remove document from state\n      setDocuments(prev => prev.filter(doc => doc.id !== docId));\n\n      // Remove from active documents if present\n      setActiveDocuments(prev => prev.filter(id => id !== docId));\n\n      // Add system message about deletion\n      const deleteMessage = {\n        id: `delete-${Date.now()}`,\n        type: 'system',\n        content: 'Document deleted successfully.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, deleteMessage]);\n    } catch (err) {\n      console.error('Failed to delete document:', err);\n\n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to delete document. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"legal-research-tab h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 shadow rounded-lg mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 sm:px-6 py-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900 dark:text-white flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(ScaleIcon, {\n            className: \"h-6 w-6 mr-2 text-primary-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), \"Legal Research Assistant\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-gray-500 dark:text-gray-400\",\n          children: \"Upload documents, ask legal questions, and search Zimbabwe legal information.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t border-gray-200 dark:border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('chat'),\n            className: `px-6 py-3 text-sm font-medium ${activeTab === 'chat' ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400' : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n                className: \"h-5 w-5 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 17\n              }, this), \"Chat\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('documents'),\n            className: `px-6 py-3 text-sm font-medium ${activeTab === 'documents' ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400' : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(DocumentPlusIcon, {\n                className: \"h-5 w-5 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this), \"Documents\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full px-2 py-0.5\",\n                children: documents.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), zimLIIResults && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('zimlii'),\n            className: `px-6 py-3 text-sm font-medium ${activeTab === 'zimlii' ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400' : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(BookOpenIcon, {\n                className: \"h-5 w-5 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), \"ZimLII Results\", zimLIIResults.count > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full px-2 py-0.5\",\n                children: zimLIIResults.count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden\",\n      children: [activeTab === 'chat' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-grow overflow-y-auto p-4\",\n          children: /*#__PURE__*/_jsxDEV(ChatInterface, {\n            messages: messages,\n            loading: loading,\n            activeDocuments: documents.filter(doc => activeDocuments.includes(doc.id))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }, this), activeDocuments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-200 dark:border-gray-700 p-2 bg-gray-50 dark:bg-gray-900\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center overflow-x-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500 dark:text-gray-400 mr-2 whitespace-nowrap\",\n              children: \"Active Documents:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 19\n            }, this), documents.filter(doc => activeDocuments.includes(doc.id)).map(doc => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-white dark:bg-gray-800 rounded-lg px-2 py-1 mr-2 shadow-sm border border-gray-200 dark:border-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs truncate max-w-[150px]\",\n                children: doc.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ml-1 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\",\n                onClick: () => toggleActiveDocument(doc.id),\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-3 w-3\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M6 18L18 6M6 6l12 12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 25\n              }, this)]\n            }, doc.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-200 dark:border-gray-700 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowUploader(true),\n              className: \"mr-2 p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700\",\n              title: \"Upload Document\",\n              children: /*#__PURE__*/_jsxDEV(DocumentPlusIcon, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab('documents'),\n              className: \"mr-2 p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700\",\n              title: \"Select Documents\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"h-5 w-5\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative flex-grow\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: loading ? \"Processing...\" : \"Ask a legal question or type /search_zimlii [keywords] to search ZimLII\",\n                className: \"block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 p-2 pr-10 text-sm\",\n                onKeyPress: e => {\n                  if (e.key === 'Enter' && !loading) {\n                    handleSendMessage(e.target.value);\n                    e.target.value = '';\n                  }\n                },\n                disabled: loading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-y-0 right-0 flex items-center pr-3\",\n                children: loading ? /*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                  className: \"h-5 w-5 text-gray-400 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\",\n                  onClick: () => {\n                    const input = document.querySelector('input[type=\"text\"]');\n                    if (input.value) {\n                      handleSendMessage(input.value);\n                      input.value = '';\n                    }\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"h-5 w-5\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M13 5l7 7-7 7M5 5l7 7-7 7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-xs text-gray-500 dark:text-gray-400\",\n            children: \"Tip: Select documents above to include them in your research context.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), activeTab === 'documents' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(DocumentManagement, {\n          documents: documents,\n          activeDocuments: activeDocuments.map(id => ({\n            document_id: id\n          })),\n          onUpload: handleFileUpload,\n          onToggleActive: toggleActiveDocument,\n          onDelete: deleteDocument,\n          loading: loading,\n          error: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 11\n      }, this), activeTab === 'zimlii' && zimLIIResults && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(ZimLIISearchPanel, {\n          results: zimLIIResults,\n          loading: loading,\n          onSearch: handleZimLIISearch,\n          onClose: () => setActiveTab('chat')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n};\n_s(LegalResearchTab, \"rPM6DT9SvjKD8qW/CMhfxDTfBfw=\");\n_c = LegalResearchTab;\nexport default LegalResearchTab;\nvar _c;\n$RefreshReg$(_c, \"LegalResearchTab\");","map":{"version":3,"names":["React","useState","useEffect","useRef","DocumentPlusIcon","ChatBubbleLeftRightIcon","ArrowPathIcon","MagnifyingGlassIcon","BookOpenIcon","ScaleIcon","ArchiveBoxXMarkIcon","apiRequest","DocumentUploader","ChatInterface","DocumentManagement","ZimLIISearchPanel","jsxDEV","_jsxDEV","LegalResearchTab","_s","documents","setDocuments","activeDocuments","setActiveDocuments","messages","setMessages","loading","setLoading","error","setError","showUploader","setShowUploader","zimLIIResults","setZimLIIResults","activeTab","setActiveTab","fetchDocuments","id","type","content","timestamp","Date","response","err","console","handleFileUpload","files","formData","FormData","Array","from","forEach","file","index","append","prev","uploadMessage","now","length","errorMessage","isError","toggleActiveDocument","docId","includes","filter","getActiveDocumentContext","activeDocsDetails","doc","map","name","handleSendMessage","message","trim","startsWith","handleZimLIISearch","replace","userMessage","documentContext","recentChat","slice","query","chatHistory","needsZimLII","zimLIIQuery","aiMessage","references","searchQuery","searchingMessage","resultsMessage","count","results","deleteDocument","deleteMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","title","placeholder","onKeyPress","e","key","target","value","disabled","input","document","querySelector","document_id","onUpload","onToggleActive","onDelete","onSearch","onClose","_c","$RefreshReg$"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/pages/research/LegalResearchTab.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { \n  DocumentPlusIcon, \n  ChatBubbleLeftRightIcon, \n  ArrowPathIcon,\n  MagnifyingGlassIcon,\n  BookOpenIcon,\n  ScaleIcon,\n  ArchiveBoxXMarkIcon\n} from '@heroicons/react/24/outline';\nimport apiRequest from '../../utils/api';\nimport DocumentUploader from '../../components/research/DocumentUploader';\nimport ChatInterface from '../../components/research/ChatInterface';\nimport DocumentManagement from '../../components/research/DocumentManagement';\nimport ZimLIISearchPanel from '../../components/research/ZimLIISearchPanel';\n\nconst LegalResearchTab = () => {\n  // State management\n  const [documents, setDocuments] = useState([]);\n  const [activeDocuments, setActiveDocuments] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showUploader, setShowUploader] = useState(false);\n  const [zimLIIResults, setZimLIIResults] = useState(null);\n  const [activeTab, setActiveTab] = useState('chat'); // 'chat', 'documents', 'zimlii'\n  \n  // Fetch documents on component mount\n  useEffect(() => {\n    fetchDocuments();\n    \n    // Add welcome message\n    setMessages([\n      {\n        id: 'welcome',\n        type: 'system',\n        content: 'Welcome to the Legal Research Assistant. You can upload documents, ask legal questions, and search for Zimbabwe legal information. How can I help you today?',\n        timestamp: new Date()\n      }\n    ]);\n  }, []);\n  \n  const fetchDocuments = async () => {\n    try {\n      setLoading(true);\n      const response = await apiRequest('/api/documents/');\n      setDocuments(response || []);\n    } catch (err) {\n      console.error('Failed to fetch documents:', err);\n      setError('Failed to load documents. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleFileUpload = async (files) => {\n    try {\n      setLoading(true);\n      \n      // Create a FormData object\n      const formData = new FormData();\n      \n      // Add files to FormData\n      Array.from(files).forEach((file, index) => {\n        formData.append(`file_${index}`, file);\n      });\n      \n      // Upload the files\n      const response = await apiRequest('/api/documents/upload/', 'POST', formData, true);\n      \n      // Update documents list with new uploads\n      setDocuments(prev => [...prev, ...response]);\n      \n      // Add system message about uploads\n      const uploadMessage = {\n        id: `upload-${Date.now()}`,\n        type: 'system',\n        content: `Uploaded ${files.length} document(s). You can now reference them in your research.`,\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, uploadMessage]);\n      setShowUploader(false);\n    } catch (err) {\n      console.error('Failed to upload documents:', err);\n      setError('Failed to upload documents. Please try again.');\n      \n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to upload documents. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const toggleActiveDocument = (docId) => {\n    setActiveDocuments(prev => {\n      if (prev.includes(docId)) {\n        return prev.filter(id => id !== docId);\n      } else {\n        return [...prev, docId];\n      }\n    });\n  };\n  \n  const getActiveDocumentContext = () => {\n    const activeDocsDetails = documents.filter(doc => activeDocuments.includes(doc.id));\n    return activeDocsDetails.map(doc => ({\n      id: doc.id,\n      name: doc.name,\n      content: doc.content || `Reference to document: ${doc.name}`\n    }));\n  };\n  \n  const handleSendMessage = async (message) => {\n    if (!message.trim()) return;\n    \n    // Check for ZimLII command\n    if (message.startsWith('/search_zimlii')) {\n      handleZimLIISearch(message.replace('/search_zimlii', '').trim());\n      return;\n    }\n    \n    // Add user message to chat\n    const userMessage = {\n      id: `user-${Date.now()}`,\n      type: 'user',\n      content: message,\n      timestamp: new Date()\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    \n    try {\n      setLoading(true);\n      \n      // Get active document context\n      const documentContext = getActiveDocumentContext();\n      \n      // Get recent chat history (last 10 messages)\n      const recentChat = messages.slice(-10);\n      \n      // Call Gemini API through our backend\n      const response = await apiRequest('/api/gemini/query-gemini/', 'POST', {\n        query: message,\n        documentContext: documentContext,\n        chatHistory: recentChat\n      });\n      \n      // Check if Gemini suggests looking up ZimLII data\n      if (response.needsZimLII) {\n        // If the API extracted a search query for ZimLII\n        if (response.zimLIIQuery) {\n          handleZimLIISearch(response.zimLIIQuery);\n        }\n      }\n      \n      // Add AI response to chat\n      const aiMessage = {\n        id: `ai-${Date.now()}`,\n        type: 'ai',\n        content: response.response,\n        timestamp: new Date(),\n        references: response.references || []\n      };\n      \n      setMessages(prev => [...prev, aiMessage]);\n    } catch (err) {\n      console.error('Failed to get AI response:', err);\n      \n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to get AI response. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleZimLIISearch = async (searchQuery) => {\n    if (!searchQuery.trim()) return;\n    \n    // Add user message about ZimLII search\n    const userMessage = {\n      id: `zimlii-query-${Date.now()}`,\n      type: 'user',\n      content: `/search_zimlii ${searchQuery}`,\n      timestamp: new Date()\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    \n    try {\n      setLoading(true);\n      \n      // System message about searching ZimLII\n      const searchingMessage = {\n        id: `zimlii-searching-${Date.now()}`,\n        type: 'system',\n        content: `Searching ZimLII for: \"${searchQuery}\"...`,\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, searchingMessage]);\n      \n      // Query ZimLII API through our backend\n      const response = await apiRequest('/api/research/search-zimlii/', 'POST', {\n        query: searchQuery\n      });\n      \n      // Store results in state\n      setZimLIIResults(response);\n      \n      // Add results message\n      const resultsMessage = {\n        id: `zimlii-results-${Date.now()}`,\n        type: 'zimlii',\n        content: `Found ${response.count || 0} results on ZimLII for \"${searchQuery}\"`,\n        timestamp: new Date(),\n        results: response\n      };\n      \n      setMessages(prev => [...prev, resultsMessage]);\n      \n      // Switch to ZimLII results tab if there are results\n      if (response.count > 0) {\n        setActiveTab('zimlii');\n      }\n    } catch (err) {\n      console.error('Failed to search ZimLII:', err);\n      \n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to search ZimLII. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const deleteDocument = async (docId) => {\n    try {\n      setLoading(true);\n      \n      // Make API request to delete the document\n      await apiRequest(`/api/documents/${docId}/`, 'DELETE');\n      \n      // Remove document from state\n      setDocuments(prev => prev.filter(doc => doc.id !== docId));\n      \n      // Remove from active documents if present\n      setActiveDocuments(prev => prev.filter(id => id !== docId));\n      \n      // Add system message about deletion\n      const deleteMessage = {\n        id: `delete-${Date.now()}`,\n        type: 'system',\n        content: 'Document deleted successfully.',\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, deleteMessage]);\n    } catch (err) {\n      console.error('Failed to delete document:', err);\n      \n      // Add error message\n      const errorMessage = {\n        id: `error-${Date.now()}`,\n        type: 'system',\n        content: 'Failed to delete document. Please try again.',\n        timestamp: new Date(),\n        isError: true\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <div className=\"legal-research-tab h-full flex flex-col\">\n      <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg mb-5\">\n        <div className=\"px-4 sm:px-6 py-5\">\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white flex items-center\">\n            <ScaleIcon className=\"h-6 w-6 mr-2 text-primary-500\" />\n            Legal Research Assistant\n          </h2>\n          <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n            Upload documents, ask legal questions, and search Zimbabwe legal information.\n          </p>\n        </div>\n        \n        {/* Tabs */}\n        <div className=\"border-t border-gray-200 dark:border-gray-700\">\n          <nav className=\"flex\">\n            <button\n              onClick={() => setActiveTab('chat')}\n              className={`px-6 py-3 text-sm font-medium ${\n                activeTab === 'chat'\n                  ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400'\n                  : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n              }`}\n            >\n              <div className=\"flex items-center\">\n                <ChatBubbleLeftRightIcon className=\"h-5 w-5 mr-1\" />\n                Chat\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('documents')}\n              className={`px-6 py-3 text-sm font-medium ${\n                activeTab === 'documents'\n                  ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400'\n                  : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n              }`}\n            >\n              <div className=\"flex items-center\">\n                <DocumentPlusIcon className=\"h-5 w-5 mr-1\" />\n                Documents\n                <span className=\"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full px-2 py-0.5\">\n                  {documents.length}\n                </span>\n              </div>\n            </button>\n            \n            {zimLIIResults && (\n              <button\n                onClick={() => setActiveTab('zimlii')}\n                className={`px-6 py-3 text-sm font-medium ${\n                  activeTab === 'zimlii'\n                    ? 'border-b-2 border-primary-500 text-primary-600 dark:text-primary-400'\n                    : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center\">\n                  <BookOpenIcon className=\"h-5 w-5 mr-1\" />\n                  ZimLII Results\n                  {zimLIIResults.count > 0 && (\n                    <span className=\"ml-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full px-2 py-0.5\">\n                      {zimLIIResults.count}\n                    </span>\n                  )}\n                </div>\n              </button>\n            )}\n          </nav>\n        </div>\n      </div>\n      \n      {/* Content Area */}\n      <div className=\"flex-grow bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden\">\n        {/* Chat Tab */}\n        {activeTab === 'chat' && (\n          <div className=\"h-full flex flex-col\">\n            <div className=\"flex-grow overflow-y-auto p-4\">\n              <ChatInterface \n                messages={messages} \n                loading={loading}\n                activeDocuments={documents.filter(doc => activeDocuments.includes(doc.id))}\n              />\n            </div>\n            \n            {/* Active Documents Bar */}\n            {activeDocuments.length > 0 && (\n              <div className=\"border-t border-gray-200 dark:border-gray-700 p-2 bg-gray-50 dark:bg-gray-900\">\n                <div className=\"flex items-center overflow-x-auto\">\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400 mr-2 whitespace-nowrap\">\n                    Active Documents:\n                  </span>\n                  \n                  {documents\n                    .filter(doc => activeDocuments.includes(doc.id))\n                    .map(doc => (\n                      <div key={doc.id} className=\"flex items-center bg-white dark:bg-gray-800 rounded-lg px-2 py-1 mr-2 shadow-sm border border-gray-200 dark:border-gray-700\">\n                        <span className=\"text-xs truncate max-w-[150px]\">{doc.name}</span>\n                        <button \n                          className=\"ml-1 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                          onClick={() => toggleActiveDocument(doc.id)}\n                        >\n                          <svg className=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      </div>\n                    ))\n                  }\n                </div>\n              </div>\n            )}\n            \n            {/* Message Input */}\n            <div className=\"border-t border-gray-200 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center\">\n                <button\n                  onClick={() => setShowUploader(true)}\n                  className=\"mr-2 p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700\"\n                  title=\"Upload Document\"\n                >\n                  <DocumentPlusIcon className=\"h-5 w-5\" />\n                </button>\n                \n                <button\n                  onClick={() => setActiveTab('documents')}\n                  className=\"mr-2 p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700\"\n                  title=\"Select Documents\"\n                >\n                  <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                  </svg>\n                </button>\n                \n                <div className=\"relative flex-grow\">\n                  <input\n                    type=\"text\"\n                    placeholder={loading ? \"Processing...\" : \"Ask a legal question or type /search_zimlii [keywords] to search ZimLII\"}\n                    className=\"block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 p-2 pr-10 text-sm\"\n                    onKeyPress={(e) => {\n                      if (e.key === 'Enter' && !loading) {\n                        handleSendMessage(e.target.value);\n                        e.target.value = '';\n                      }\n                    }}\n                    disabled={loading}\n                  />\n                  \n                  <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\n                    {loading ? (\n                      <ArrowPathIcon className=\"h-5 w-5 text-gray-400 animate-spin\" />\n                    ) : (\n                      <button\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                        onClick={() => {\n                          const input = document.querySelector('input[type=\"text\"]');\n                          if (input.value) {\n                            handleSendMessage(input.value);\n                            input.value = '';\n                          }\n                        }}\n                      >\n                        <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" />\n                        </svg>\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              {/* Helper hint */}\n              <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                Tip: Select documents above to include them in your research context.\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Documents Tab */}\n        {activeTab === 'documents' && (\n          <div className=\"h-full flex flex-col\">\n            <DocumentManagement \n              documents={documents}\n              activeDocuments={activeDocuments.map(id => ({ document_id: id }))}\n              onUpload={handleFileUpload}\n              onToggleActive={toggleActiveDocument}\n              onDelete={deleteDocument}\n              loading={loading}\n              error={error}\n            />\n          </div>\n        )}\n        \n        {/* ZimLII Results Tab */}\n        {activeTab === 'zimlii' && zimLIIResults && (\n          <div className=\"h-full flex flex-col\">\n            <ZimLIISearchPanel \n              results={zimLIIResults}\n              loading={loading}\n              onSearch={handleZimLIISearch}\n              onClose={() => setActiveTab('chat')}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LegalResearchTab;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}