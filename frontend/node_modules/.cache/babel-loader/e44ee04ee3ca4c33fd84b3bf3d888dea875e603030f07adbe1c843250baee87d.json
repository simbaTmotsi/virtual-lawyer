{"ast":null,"code":"/**\n * Helper utility for making authenticated API requests\n */\n\nexport const apiRequest = async (endpoint, method = 'GET', data = null) => {\n  const baseUrl = process.env.REACT_APP_API_URL || '';\n  const url = `${baseUrl}${endpoint}`;\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n\n  // Add auth token to headers if it exists\n  const token = localStorage.getItem('token');\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const options = {\n    method,\n    headers,\n    credentials: 'include' // For cookies if your backend uses them\n  };\n\n  // Add request body for POST, PUT, PATCH\n  if (data && ['POST', 'PUT', 'PATCH'].includes(method)) {\n    options.body = JSON.stringify(data);\n  }\n  console.log(`Making ${method} request to ${url}`);\n  const response = await fetch(url, options);\n\n  // Check if the response is JSON\n  const contentType = response.headers.get('content-type');\n  const isJson = contentType && contentType.includes('application/json');\n\n  // Parse response\n  const responseData = isJson ? await response.json() : await response.text();\n\n  // If response is not ok, throw an error\n  if (!response.ok) {\n    const error = new Error(response.statusText);\n    error.status = response.status;\n    error.data = responseData;\n    throw error;\n  }\n  return responseData;\n};","map":{"version":3,"names":["apiRequest","endpoint","method","data","baseUrl","process","env","REACT_APP_API_URL","url","headers","token","localStorage","getItem","options","credentials","includes","body","JSON","stringify","console","log","response","fetch","contentType","get","isJson","responseData","json","text","ok","error","Error","statusText","status"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/utils/apiHelper.js"],"sourcesContent":["/**\n * Helper utility for making authenticated API requests\n */\n\nexport const apiRequest = async (endpoint, method = 'GET', data = null) => {\n  const baseUrl = process.env.REACT_APP_API_URL || '';\n  const url = `${baseUrl}${endpoint}`;\n  \n  const headers = {\n    'Content-Type': 'application/json',\n  };\n  \n  // Add auth token to headers if it exists\n  const token = localStorage.getItem('token');\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  \n  const options = {\n    method,\n    headers,\n    credentials: 'include', // For cookies if your backend uses them\n  };\n  \n  // Add request body for POST, PUT, PATCH\n  if (data && ['POST', 'PUT', 'PATCH'].includes(method)) {\n    options.body = JSON.stringify(data);\n  }\n  \n  console.log(`Making ${method} request to ${url}`);\n  \n  const response = await fetch(url, options);\n  \n  // Check if the response is JSON\n  const contentType = response.headers.get('content-type');\n  const isJson = contentType && contentType.includes('application/json');\n  \n  // Parse response\n  const responseData = isJson ? await response.json() : await response.text();\n  \n  // If response is not ok, throw an error\n  if (!response.ok) {\n    const error = new Error(response.statusText);\n    error.status = response.status;\n    error.data = responseData;\n    throw error;\n  }\n  \n  return responseData;\n};\n"],"mappings":"AAAA;AACA;AACA;;AAEA,OAAO,MAAMA,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,KAAK;EACzE,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,EAAE;EACnD,MAAMC,GAAG,GAAG,GAAGJ,OAAO,GAAGH,QAAQ,EAAE;EAEnC,MAAMQ,OAAO,GAAG;IACd,cAAc,EAAE;EAClB,CAAC;;EAED;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUC,KAAK,EAAE;EAC9C;EAEA,MAAMG,OAAO,GAAG;IACdX,MAAM;IACNO,OAAO;IACPK,WAAW,EAAE,SAAS,CAAE;EAC1B,CAAC;;EAED;EACA,IAAIX,IAAI,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAACY,QAAQ,CAACb,MAAM,CAAC,EAAE;IACrDW,OAAO,CAACG,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACf,IAAI,CAAC;EACrC;EAEAgB,OAAO,CAACC,GAAG,CAAC,UAAUlB,MAAM,eAAeM,GAAG,EAAE,CAAC;EAEjD,MAAMa,QAAQ,GAAG,MAAMC,KAAK,CAACd,GAAG,EAAEK,OAAO,CAAC;;EAE1C;EACA,MAAMU,WAAW,GAAGF,QAAQ,CAACZ,OAAO,CAACe,GAAG,CAAC,cAAc,CAAC;EACxD,MAAMC,MAAM,GAAGF,WAAW,IAAIA,WAAW,CAACR,QAAQ,CAAC,kBAAkB,CAAC;;EAEtE;EACA,MAAMW,YAAY,GAAGD,MAAM,GAAG,MAAMJ,QAAQ,CAACM,IAAI,CAAC,CAAC,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;;EAE3E;EACA,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;IAChB,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACV,QAAQ,CAACW,UAAU,CAAC;IAC5CF,KAAK,CAACG,MAAM,GAAGZ,QAAQ,CAACY,MAAM;IAC9BH,KAAK,CAAC3B,IAAI,GAAGuB,YAAY;IACzB,MAAMI,KAAK;EACb;EAEA,OAAOJ,YAAY;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}