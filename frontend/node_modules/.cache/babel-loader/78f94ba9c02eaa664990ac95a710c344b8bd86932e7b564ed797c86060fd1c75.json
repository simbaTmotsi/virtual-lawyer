{"ast":null,"code":"import React,{useState}from'react';import apiRequest from'../../utils/api';import{MagnifyingGlassIcon,ArrowPathIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LegalSearch=()=>{const[query,setQuery]=useState('');const[jurisdiction,setJurisdiction]=useState('');const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const jurisdictions=[{id:'us_federal',name:'US Federal'},{id:'us_state',name:'US State'},{id:'uk',name:'United Kingdom'},{id:'eu',name:'European Union'},{id:'international',name:'International Law'}];const handleSearch=async e=>{e.preventDefault();if(!query.trim())return;try{setLoading(true);setError(null);const response=await apiRequest('/api/research/perform-search/','POST',{query:query.trim(),jurisdiction:jurisdiction||null});setResults(response||[]);}catch(err){console.error('Research query failed:',err);setError('Failed to perform research. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"legal-search\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"research-query\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Research Query\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"textarea\",{id:\"research-query\",rows:3,className:\"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md\",placeholder:\"Enter your legal research question...\",value:query,onChange:e=>setQuery(e.target.value),required:true})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"jurisdiction\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Jurisdiction (Optional)\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"jurisdiction\",className:\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md\",value:jurisdiction,onChange:e=>setJurisdiction(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Jurisdictions\"}),jurisdictions.map(j=>/*#__PURE__*/_jsx(\"option\",{value:j.id,children:j.name},j.id))]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!query.trim(),className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"animate-spin -ml-1 mr-2 h-5 w-5\"}),\"Searching...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"Search\"]})})})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 dark:bg-red-900/30 p-4 mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800 dark:text-red-200\",children:\"Error\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-red-700 dark:text-red-300\",children:/*#__PURE__*/_jsx(\"p\",{children:error})})]})})}),results.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"results-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:\"Research Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden bg-white dark:bg-gray-800 shadow sm:rounded-md\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:results.map((result,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"px-4 py-4 sm:px-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-primary-600 dark:text-primary-400 truncate\",children:result.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\",children:[(result.relevance*100).toFixed(0),\"% relevance\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-gray-500 dark:text-gray-400\",children:/*#__PURE__*/_jsx(\"p\",{className:\"line-clamp-2\",children:result.excerpt})}),result.source&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-500 dark:text-gray-400\",children:[\"Source: \",result.source]})]},index))})})]}),!loading&&!error&&query&&results.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900 dark:text-white\",children:\"No results found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:\"Try adjusting your search terms or changing the jurisdiction.\"})]})]});};export default LegalSearch;","map":{"version":3,"names":["React","useState","apiRequest","MagnifyingGlassIcon","ArrowPathIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LegalSearch","query","setQuery","jurisdiction","setJurisdiction","results","setResults","loading","setLoading","error","setError","jurisdictions","id","name","handleSearch","e","preventDefault","trim","response","err","console","className","children","onSubmit","htmlFor","rows","placeholder","value","onChange","target","required","map","j","type","disabled","length","result","index","title","relevance","toFixed","excerpt","source"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/pages/research/LegalSearch.js"],"sourcesContent":["import React, { useState } from 'react';\nimport apiRequest from '../../utils/api';\nimport { MagnifyingGlassIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\nconst LegalSearch = () => {\n  const [query, setQuery] = useState('');\n  const [jurisdiction, setJurisdiction] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const jurisdictions = [\n    { id: 'us_federal', name: 'US Federal' },\n    { id: 'us_state', name: 'US State' },\n    { id: 'uk', name: 'United Kingdom' },\n    { id: 'eu', name: 'European Union' },\n    { id: 'international', name: 'International Law' },\n  ];\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await apiRequest('/api/research/perform-search/', 'POST', {\n        query: query.trim(),\n        jurisdiction: jurisdiction || null\n      });\n\n      setResults(response || []);\n    } catch (err) {\n      console.error('Research query failed:', err);\n      setError('Failed to perform research. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"legal-search\">\n      <form onSubmit={handleSearch} className=\"mb-6\">\n        <div className=\"flex flex-col space-y-4\">\n          <div>\n            <label htmlFor=\"research-query\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Research Query\n            </label>\n            <div className=\"mt-1\">\n              <textarea\n                id=\"research-query\"\n                rows={3}\n                className=\"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md\"\n                placeholder=\"Enter your legal research question...\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                required\n              />\n            </div>\n          </div>\n          \n          <div>\n            <label htmlFor=\"jurisdiction\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Jurisdiction (Optional)\n            </label>\n            <select\n              id=\"jurisdiction\"\n              className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md\"\n              value={jurisdiction}\n              onChange={(e) => setJurisdiction(e.target.value)}\n            >\n              <option value=\"\">All Jurisdictions</option>\n              {jurisdictions.map((j) => (\n                <option key={j.id} value={j.id}>\n                  {j.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading || !query.trim()}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\"\n            >\n              {loading ? (\n                <>\n                  <ArrowPathIcon className=\"animate-spin -ml-1 mr-2 h-5 w-5\" />\n                  Searching...\n                </>\n              ) : (\n                <>\n                  <MagnifyingGlassIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                  Search\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </form>\n\n      {error && (\n        <div className=\"rounded-md bg-red-50 dark:bg-red-900/30 p-4 mb-6\">\n          <div className=\"flex\">\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800 dark:text-red-200\">Error</h3>\n              <div className=\"mt-2 text-sm text-red-700 dark:text-red-300\">\n                <p>{error}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {results.length > 0 && (\n        <div className=\"results-container\">\n          <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Research Results</h2>\n          <div className=\"overflow-hidden bg-white dark:bg-gray-800 shadow sm:rounded-md\">\n            <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n              {results.map((result, index) => (\n                <li key={index} className=\"px-4 py-4 sm:px-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-sm font-medium text-primary-600 dark:text-primary-400 truncate\">{result.title}</h3>\n                    <p className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\n                      {(result.relevance * 100).toFixed(0)}% relevance\n                    </p>\n                  </div>\n                  <div className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                    <p className=\"line-clamp-2\">{result.excerpt}</p>\n                  </div>\n                  {result.source && (\n                    <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                      Source: {result.source}\n                    </div>\n                  )}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      )}\n\n      {!loading && !error && query && results.length === 0 && (\n        <div className=\"text-center py-12\">\n          <MagnifyingGlassIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">No results found</h3>\n          <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n            Try adjusting your search terms or changing the jurisdiction.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LegalSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}