{"ast":null,"code":"var _jsxFileName = \"/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/contexts/NotificationsContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { api } from '../utils/api';\n\n// Create context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationsContext = /*#__PURE__*/React.createContext(null);\nconst NotificationsProvider = ({\n  children\n}) => {\n  _s();\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchNotifications = async () => {\n    try {\n      setLoading(true);\n      // Temporarily using mock data until the backend endpoint is implemented\n      // const response = await api.get('/api/notifications/');\n      const notificationData = [{\n        id: 1,\n        title: 'New Case Assigned',\n        message: 'You have been assigned to Case #1234',\n        read: false,\n        createdAt: new Date().toISOString()\n      }, {\n        id: 2,\n        title: 'Document Updated',\n        message: 'Contract for Smith case has been updated',\n        read: true,\n        createdAt: new Date(Date.now() - 86400000).toISOString()\n      }, {\n        id: 3,\n        title: 'Upcoming Meeting',\n        message: 'Client meeting tomorrow at 10:00 AM',\n        read: false,\n        createdAt: new Date(Date.now() - 172800000).toISOString()\n      }];\n      setNotifications(notificationData);\n      setUnreadCount(notificationData.filter(notification => !notification.read).length);\n      setError(null);\n    } catch (err) {\n      console.error('Failed to fetch notifications:', err);\n      setError('Failed to load notifications');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const markAsRead = async notificationId => {\n    try {\n      await api.patch(`/api/notifications/${notificationId}/`, {\n        read: true\n      });\n\n      // Update local state\n      setNotifications(notifications.map(notification => notification.id === notificationId ? {\n        ...notification,\n        read: true\n      } : notification));\n      setUnreadCount(prev => Math.max(0, prev - 1));\n      return true;\n    } catch (err) {\n      console.error('Failed to mark notification as read:', err);\n      return false;\n    }\n  };\n  const markAllAsRead = async () => {\n    try {\n      await api.post('/api/notifications/mark-all-read/');\n\n      // Update local state\n      setNotifications(notifications.map(notification => ({\n        ...notification,\n        read: true\n      })));\n      setUnreadCount(0);\n      return true;\n    } catch (err) {\n      console.error('Failed to mark all notifications as read:', err);\n      return false;\n    }\n  };\n\n  // Fetch notifications when the component mounts\n  useEffect(() => {\n    fetchNotifications();\n\n    // Set up polling for new notifications (every 60 seconds)\n    const intervalId = setInterval(fetchNotifications, 60000);\n    return () => clearInterval(intervalId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(NotificationsContext.Provider, {\n    value: {\n      notifications,\n      unreadCount,\n      loading,\n      error,\n      fetchNotifications,\n      markAsRead,\n      markAllAsRead\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n// Hook for using the notifications context\n_s(NotificationsProvider, \"luGxckMMpZuJ/EnbdxvGERjh3AQ=\");\n_c = NotificationsProvider;\nexport const useNotifications = () => {\n  _s2();\n  const context = React.useContext(NotificationsContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationsProvider');\n  }\n  return context;\n};\n_s2(useNotifications, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default NotificationsProvider;\nvar _c;\n$RefreshReg$(_c, \"NotificationsProvider\");","map":{"version":3,"names":["React","useState","useEffect","api","jsxDEV","_jsxDEV","NotificationsContext","createContext","NotificationsProvider","children","_s","notifications","setNotifications","unreadCount","setUnreadCount","loading","setLoading","error","setError","fetchNotifications","notificationData","id","title","message","read","createdAt","Date","toISOString","now","filter","notification","length","err","console","markAsRead","notificationId","patch","map","prev","Math","max","markAllAsRead","post","intervalId","setInterval","clearInterval","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useNotifications","_s2","context","useContext","Error","$RefreshReg$"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/contexts/NotificationsContext.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { api } from '../utils/api';\n\n// Create context\nconst NotificationsContext = React.createContext(null);\n\nconst NotificationsProvider = ({ children }) => {\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchNotifications = async () => {\n    try {\n      setLoading(true);\n      // Temporarily using mock data until the backend endpoint is implemented\n      // const response = await api.get('/api/notifications/');\n      const notificationData = [\n        { id: 1, title: 'New Case Assigned', message: 'You have been assigned to Case #1234', read: false, createdAt: new Date().toISOString() },\n        { id: 2, title: 'Document Updated', message: 'Contract for Smith case has been updated', read: true, createdAt: new Date(Date.now() - 86400000).toISOString() },\n        { id: 3, title: 'Upcoming Meeting', message: 'Client meeting tomorrow at 10:00 AM', read: false, createdAt: new Date(Date.now() - 172800000).toISOString() }\n      ];\n      setNotifications(notificationData);\n      setUnreadCount(notificationData.filter(notification => !notification.read).length);\n      setError(null);\n    } catch (err) {\n      console.error('Failed to fetch notifications:', err);\n      setError('Failed to load notifications');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markAsRead = async (notificationId) => {\n    try {\n      await api.patch(`/api/notifications/${notificationId}/`, { read: true });\n      \n      // Update local state\n      setNotifications(notifications.map(notification => \n        notification.id === notificationId \n          ? { ...notification, read: true } \n          : notification\n      ));\n      \n      setUnreadCount(prev => Math.max(0, prev - 1));\n      return true;\n    } catch (err) {\n      console.error('Failed to mark notification as read:', err);\n      return false;\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      await api.post('/api/notifications/mark-all-read/');\n      \n      // Update local state\n      setNotifications(notifications.map(notification => ({ ...notification, read: true })));\n      setUnreadCount(0);\n      return true;\n    } catch (err) {\n      console.error('Failed to mark all notifications as read:', err);\n      return false;\n    }\n  };\n\n  // Fetch notifications when the component mounts\n  useEffect(() => {\n    fetchNotifications();\n    \n    // Set up polling for new notifications (every 60 seconds)\n    const intervalId = setInterval(fetchNotifications, 60000);\n    \n    return () => clearInterval(intervalId);\n  }, []);\n\n  return (\n    <NotificationsContext.Provider \n      value={{ \n        notifications, \n        unreadCount, \n        loading, \n        error, \n        fetchNotifications, \n        markAsRead, \n        markAllAsRead \n      }}\n    >\n      {children}\n    </NotificationsContext.Provider>\n  );\n};\n\n// Hook for using the notifications context\nexport const useNotifications = () => {\n  const context = React.useContext(NotificationsContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationsProvider');\n  }\n  return context;\n};\n\nexport default NotificationsProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}