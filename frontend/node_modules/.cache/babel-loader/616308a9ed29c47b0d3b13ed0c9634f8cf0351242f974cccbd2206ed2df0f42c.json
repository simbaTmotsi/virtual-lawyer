{"ast":null,"code":"/**\n * API utility functions for making HTTP requests\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {string} method - HTTP method (GET, POST, PUT, DELETE)\n * @param {Object} data - Request body for POST/PUT requests\n * @param {Object} options - Additional fetch options\n * @returns {Promise<Object>} Response data\n */\nexport const apiRequest = async (endpoint, method = 'GET', data = null, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  const fetchOptions = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    ...options\n  };\n\n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    fetchOptions.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Add request body for POST/PUT requests\n  if (data && (method === 'POST' || method === 'PUT')) {\n    fetchOptions.body = JSON.stringify(data);\n  }\n  try {\n    console.group(`API Request: ${method} ${endpoint}`);\n    console.log('Request options:', fetchOptions);\n    const response = await fetch(url, fetchOptions);\n    let responseData;\n\n    // Try to parse as JSON, fallback to text\n    const contentType = response.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      responseData = await response.json();\n    } else {\n      responseData = await response.text();\n    }\n    console.log('Response status:', response.status);\n    console.log('Response data:', responseData);\n    console.groupEnd();\n    if (!response.ok) {\n      // Fix ESLint warning by properly creating an Error object\n      const error = new Error(`API Error: ${response.status}`);\n      error.status = response.status;\n      error.data = responseData;\n      throw error;\n    }\n    return responseData;\n  } catch (error) {\n    console.error('API request failed:', error);\n    console.groupEnd();\n    throw error; // Re-throw the error to be handled by the component\n  }\n};\n\n/**\n * Authentication-related API requests\n */\nexport const authAPI = {\n  register: async userData => {\n    try {\n      console.log('Sending registration data:', JSON.stringify(userData));\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        console.error('Registration API error:', data);\n        // Throw an Error object instead of a literal\n        const error = new Error(`Registration failed: ${response.status}`);\n        error.response = {\n          data,\n          status: response.status\n        };\n        throw error;\n      }\n      return data;\n    } catch (error) {\n      console.error('Registration request failed:', error);\n      throw error; // Re-throw the error (which might now be the one created above)\n    }\n  },\n  login: credentials => apiRequest('/api/auth/login', 'POST', credentials),\n  logout: () => apiRequest('/api/auth/logout', 'POST'),\n  forgotPassword: email => apiRequest('/api/auth/password-reset', 'POST', {\n    email\n  }),\n  resetPassword: (token, password) => apiRequest('/api/auth/password-reset/confirm', 'POST', {\n    token,\n    password\n  }),\n  getCurrentUser: () => apiRequest('/api/users/me', 'GET')\n};\nexport default apiRequest;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiRequest","endpoint","method","data","options","url","fetchOptions","headers","token","localStorage","getItem","Authorization","body","JSON","stringify","console","group","log","response","fetch","responseData","contentType","get","includes","json","text","status","groupEnd","ok","error","Error","authAPI","register","userData","login","credentials","logout","forgotPassword","email","resetPassword","password","getCurrentUser"],"sources":["/Users/simbatmotsi/Documents/Projects/virtual-lawyer/frontend/src/utils/api.js"],"sourcesContent":["/**\n * API utility functions for making HTTP requests\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {string} method - HTTP method (GET, POST, PUT, DELETE)\n * @param {Object} data - Request body for POST/PUT requests\n * @param {Object} options - Additional fetch options\n * @returns {Promise<Object>} Response data\n */\nexport const apiRequest = async (endpoint, method = 'GET', data = null, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  \n  const fetchOptions = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n    ...options,\n  };\n  \n  // Add auth token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    fetchOptions.headers.Authorization = `Bearer ${token}`;\n  }\n  \n  // Add request body for POST/PUT requests\n  if (data && (method === 'POST' || method === 'PUT')) {\n    fetchOptions.body = JSON.stringify(data);\n  }\n  \n  try {\n    console.group(`API Request: ${method} ${endpoint}`);\n    console.log('Request options:', fetchOptions);\n    \n    const response = await fetch(url, fetchOptions);\n    let responseData;\n    \n    // Try to parse as JSON, fallback to text\n    const contentType = response.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      responseData = await response.json();\n    } else {\n      responseData = await response.text();\n    }\n    \n    console.log('Response status:', response.status);\n    console.log('Response data:', responseData);\n    console.groupEnd();\n    \n    if (!response.ok) {\n      // Fix ESLint warning by properly creating an Error object\n      const error = new Error(`API Error: ${response.status}`);\n      error.status = response.status;\n      error.data = responseData;\n      throw error;\n    }\n    \n    return responseData;\n  } catch (error) {\n    console.error('API request failed:', error);\n    console.groupEnd();\n    throw error; // Re-throw the error to be handled by the component\n  }\n};\n\n/**\n * Authentication-related API requests\n */\nexport const authAPI = {\n  register: async (userData) => {\n    try {\n      console.log('Sending registration data:', JSON.stringify(userData));\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        console.error('Registration API error:', data);\n        // Throw an Error object instead of a literal\n        const error = new Error(`Registration failed: ${response.status}`);\n        error.response = { data, status: response.status };\n        throw error;\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Registration request failed:', error);\n      throw error; // Re-throw the error (which might now be the one created above)\n    }\n  },\n  login: (credentials) => apiRequest('/api/auth/login', 'POST', credentials),\n  logout: () => apiRequest('/api/auth/logout', 'POST'),\n  forgotPassword: (email) => apiRequest('/api/auth/password-reset', 'POST', { email }),\n  resetPassword: (token, password) => apiRequest('/api/auth/password-reset/confirm', 'POST', { token, password }),\n  getCurrentUser: () => apiRequest('/api/users/me', 'GET'),\n};\n\nexport default apiRequest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}